{"ast":null,"code":"import axios from \"axios\";\nimport $axios from \"./../axiosConfig\";\nimport jwt_decode from \"jwt-decode\";\nimport { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport * as types from \"./actionsType\";\nconst API = \"http://localhost:4000/user\";\nexport const getProducts = function () {\n  let page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"1\";\n  return async dispatch => {\n    try {\n      let filter = window.location.search;\n      let filter1 = window.location.search;\n      if (filter) filter += `&page=${page}`;else filter += `?page=${page}`;\n      const {\n        data\n      } = await $axios(`user/${filter}`);\n      if (filter1) filter1 += \"&limit=10000\";else filter1 += \"?limit=10000\";\n      const response = await $axios(`user/${filter1}`);\n      dispatch({\n        type: USER_GET_COUNT,\n        payload: response.data.rows.length\n      });\n      let action = {\n        type: USER_GET_PRODUCT,\n        payload: data.rows\n      };\n      dispatch(action);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const getDetail = id => {\n  return async dispatch => {\n    const {\n      data\n    } = await $axios(\"/user/\" + id);\n    dispatch({\n      type: USER_GET_DETAIL,\n      payload: data\n    });\n  };\n}; // ! cart\n\nexport const addAndDeleteProductInCart = product1 => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0\n    };\n  }\n\n  let product = {\n    product1: product1,\n    count: 1,\n    subPrice: 0\n  };\n  product.subPrice = CalcSubPrice(product);\n  let checkArr = cart.user.filter(item => {\n    return item.product1.id === product1.id;\n  });\n\n  if (checkArr.length === 0) {\n    cart.user.push(product);\n  } else {\n    cart.user = cart.user.filter(item => {\n      return item.product1.id !== product1.id;\n    });\n  }\n\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  return {\n    type: ADD_AND_DELETE_CART,\n    payload: cart.user.length\n  };\n};\nexport const checkProductInCart = id => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0\n    };\n  }\n\n  let checkArr = cart.user.filter(item => {\n    return item.product1.id === id;\n  });\n\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  return {\n    type: GET_CART,\n    payload: cart\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  if (count < 1) {\n    return;\n  }\n\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0\n    };\n  }\n\n  cart.user = cart.user.map(item => {\n    if (item.product1.id === id) {\n      item.count = count;\n      item.subPrice = CalcSubPrice(item);\n    }\n\n    return item;\n  });\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  getCart();\n}; // Clear count of cart\n\nexport const clearCountOfCart = () => {\n  return {\n    type: CLEAR_COUNT_OF_CART,\n    payload: null\n  };\n};","map":{"version":3,"names":["axios","$axios","jwt_decode","CalcSubPrice","calcTotalPrice","types","API","getProducts","page","dispatch","filter","window","location","search","filter1","data","response","type","USER_GET_COUNT","payload","rows","length","action","USER_GET_PRODUCT","e","console","log","getDetail","id","USER_GET_DETAIL","addAndDeleteProductInCart","product1","cart","JSON","parse","localStorage","getItem","user","totalPrice","product","count","subPrice","checkArr","item","push","setItem","stringify","ADD_AND_DELETE_CART","checkProductInCart","getCart","GET_CART","changeCountProduct","map","clearCountOfCart","CLEAR_COUNT_OF_CART"],"sources":["/home/nurlan/Desktop/crud-redux-library/src/redux/cart-actions.js"],"sourcesContent":["import axios from \"axios\";\nimport $axios from \"./../axiosConfig\";\nimport jwt_decode from \"jwt-decode\";\nimport { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport * as types from \"./actionsType\";\nconst API = \"http://localhost:4000/user\";\n\nexport const getProducts = (page = \"1\") => {\n  return async (dispatch) => {\n    try {\n      let filter = window.location.search;\n      let filter1 = window.location.search;\n\n      if (filter) filter += `&page=${page}`;\n      else filter += `?page=${page}`;\n\n      const { data } = await $axios(`user/${filter}`);\n      if (filter1) filter1 += \"&limit=10000\";\n      else filter1 += \"?limit=10000\";\n\n      const response = await $axios(`user/${filter1}`);\n      dispatch({\n        type: USER_GET_COUNT,\n        payload: response.data.rows.length,\n      });\n      let action = {\n        type: USER_GET_PRODUCT,\n        payload: data.rows,\n      };\n      dispatch(action);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const getDetail = (id) => {\n  return async (dispatch) => {\n    const { data } = await $axios(\"/user/\" + id);\n    dispatch({\n      type: USER_GET_DETAIL,\n      payload: data,\n    });\n  };\n};\n\n// ! cart\nexport const addAndDeleteProductInCart = (product1) => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0,\n    };\n  }\n  let product = {\n    product1: product1,\n    count: 1,\n    subPrice: 0,\n  };\n  product.subPrice = CalcSubPrice(product);\n  let checkArr = cart.user.filter((item) => {\n    return item.product1.id === product1.id;\n  });\n  if (checkArr.length === 0) {\n    cart.user.push(product);\n  } else {\n    cart.user = cart.user.filter((item) => {\n      return item.product1.id !== product1.id;\n    });\n  }\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  return {\n    type: ADD_AND_DELETE_CART,\n    payload: cart.user.length,\n  };\n};\nexport const checkProductInCart = (id) => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0,\n    };\n  }\n  let checkArr = cart.user.filter((item) => {\n    return item.product1.id === id;\n  });\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  return {\n    type: GET_CART,\n    payload: cart,\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  if (count < 1) {\n    return;\n  }\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0,\n    };\n  }\n  cart.user = cart.user.map((item) => {\n    if (item.product1.id === id) {\n      item.count = count;\n      item.subPrice = CalcSubPrice(item);\n    }\n    return item;\n  });\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n  getCart();\n};\n// Clear count of cart\nexport const clearCountOfCart = () => {\n  return {\n    type: CLEAR_COUNT_OF_CART,\n    payload: null,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}