{"ast":null,"code":"import axios from \"axios\";\nimport $axios from \"./../axiosConfig\";\nimport { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport { ADD_AND_DELETE_CART, CLEAR_COUNT_OF_CART, GET_CART, USER_GET_COUNT, USER_GET_DETAIL, USER_GET_PRODUCT } from \"./actionsType\";\nconst API = \"http://localhost:4000/user\";\nexport const getProducts = function () {\n  let page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"1\";\n  return async dispatch => {\n    try {\n      let filter = window.location.search;\n      let filter1 = window.location.search;\n      if (filter) filter += `&page=${page}`;else filter += `?page=${page}`;\n      const {\n        data\n      } = await $axios(`user/${filter}`);\n      if (filter1) filter1 += \"&limit=10000\";else filter1 += \"?limit=10000\";\n      const response = await $axios(`user/${filter1}`);\n      dispatch({\n        type: USER_GET_COUNT,\n        payload: response.data.rows.length\n      });\n      let action = {\n        type: USER_GET_PRODUCT,\n        payload: data.rows\n      };\n      dispatch(action);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const getDetail = id => {\n  return async dispatch => {\n    const {\n      data\n    } = await $axios(\"/user/\" + id);\n    dispatch({\n      type: USER_GET_DETAIL,\n      payload: data\n    });\n  };\n}; // ! cart\n\nexport const addAndDeleteProductInCart = product1 => {\n  return dispatch => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        user: [],\n        totalPrice: 0\n      };\n    }\n\n    let product = {\n      product1: product1,\n      count: 1,\n      subPrice: 0\n    }; // product.subPrice = CalcSubPrice(product);\n\n    let checkArr = cart.user.filter(item => {\n      return item.product1.id === product1.id;\n    });\n\n    if (checkArr.length === 0) {\n      cart.user.push(product);\n    } else {\n      cart.user = cart.user.filter(item => {\n        return item.product1.id !== product1.id;\n      });\n    }\n\n    cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch({\n      type: ADD_AND_DELETE_CART,\n      payload: cart.user.length\n    });\n  };\n};\nexport const checkProductInCart = id => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0\n    };\n  }\n\n  let checkArr = cart.user.filter(item => {\n    return item.product1.id === id;\n  });\n\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  return dispatch => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    dispatch({\n      type: GET_CART,\n      payload: cart\n    });\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  return dispatch => {\n    if (count < 1) {\n      return;\n    }\n\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        user: [],\n        totalPrice: 0\n      };\n    }\n\n    cart.user = cart.user.map(item => {\n      if (item.product1.id === id) {\n        item.count = count;\n        item.subPrice = CalcSubPrice(item);\n      }\n\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch(getCart());\n  };\n}; // Clear count of cart\n\nexport const clearCountOfCart = () => {\n  return dispatch => {\n    dispatch({\n      type: CLEAR_COUNT_OF_CART,\n      payload: null\n    });\n  };\n};","map":{"version":3,"names":["axios","$axios","CalcSubPrice","calcTotalPrice","ADD_AND_DELETE_CART","CLEAR_COUNT_OF_CART","GET_CART","USER_GET_COUNT","USER_GET_DETAIL","USER_GET_PRODUCT","API","getProducts","page","dispatch","filter","window","location","search","filter1","data","response","type","payload","rows","length","action","e","console","log","getDetail","id","addAndDeleteProductInCart","product1","cart","JSON","parse","localStorage","getItem","user","totalPrice","product","count","subPrice","checkArr","item","push","setItem","stringify","checkProductInCart","getCart","changeCountProduct","map","clearCountOfCart"],"sources":["/home/bayel/Desktop/work/library-test/src/redux/cart-actions.js"],"sourcesContent":["import axios from \"axios\";\nimport $axios from \"./../axiosConfig\";\nimport { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport {\n  ADD_AND_DELETE_CART,\n  CLEAR_COUNT_OF_CART,\n  GET_CART,\n  USER_GET_COUNT,\n  USER_GET_DETAIL,\n  USER_GET_PRODUCT,\n} from \"./actionsType\";\nconst API = \"http://localhost:4000/user\";\n\nexport const getProducts = (page = \"1\") => {\n  return async (dispatch) => {\n    try {\n      let filter = window.location.search;\n      let filter1 = window.location.search;\n\n      if (filter) filter += `&page=${page}`;\n      else filter += `?page=${page}`;\n\n      const { data } = await $axios(`user/${filter}`);\n      if (filter1) filter1 += \"&limit=10000\";\n      else filter1 += \"?limit=10000\";\n\n      const response = await $axios(`user/${filter1}`);\n      dispatch({\n        type: USER_GET_COUNT,\n        payload: response.data.rows.length,\n      });\n      let action = {\n        type: USER_GET_PRODUCT,\n        payload: data.rows,\n      };\n      dispatch(action);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const getDetail = (id) => {\n  return async (dispatch) => {\n    const { data } = await $axios(\"/user/\" + id);\n    dispatch({\n      type: USER_GET_DETAIL,\n      payload: data,\n    });\n  };\n};\n\n// ! cart\nexport const addAndDeleteProductInCart = (product1) => {\n  return (dispatch) => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        user: [],\n        totalPrice: 0,\n      };\n    }\n    let product = {\n      product1: product1,\n      count: 1,\n      subPrice: 0,\n    };\n    // product.subPrice = CalcSubPrice(product);\n    let checkArr = cart.user.filter((item) => {\n      return item.product1.id === product1.id;\n    });\n    if (checkArr.length === 0) {\n      cart.user.push(product);\n    } else {\n      cart.user = cart.user.filter((item) => {\n        return item.product1.id !== product1.id;\n      });\n    }\n    cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch({\n      type: ADD_AND_DELETE_CART,\n      payload: cart.user.length,\n    });\n  };\n};\nexport const checkProductInCart = (id) => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      user: [],\n      totalPrice: 0,\n    };\n  }\n  let checkArr = cart.user.filter((item) => {\n    return item.product1.id === id;\n  });\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  return (dispatch) => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    dispatch({\n      type: GET_CART,\n      payload: cart,\n    });\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  return (dispatch) => {\n    if (count < 1) {\n      return;\n    }\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        user: [],\n        totalPrice: 0,\n      };\n    }\n    cart.user = cart.user.map((item) => {\n      if (item.product1.id === id) {\n        item.count = count;\n        item.subPrice = CalcSubPrice(item);\n      }\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n    dispatch(getCart());\n  };\n};\n// Clear count of cart\nexport const clearCountOfCart = () => {\n  return (dispatch) => {\n    dispatch({\n      type: CLEAR_COUNT_OF_CART,\n      payload: null,\n    });\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}