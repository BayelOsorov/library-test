{"ast":null,"code":"import { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport { ADD_AND_DELETE_CART, CLEAR_COUNT_OF_CART, GET_CART } from \"./actionsType\"; // ! cart\n\nexport const addAndDeleteProductInCart = product1 => {\n  return dispatch => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        books: [],\n        totalPrice: 0\n      };\n    }\n\n    let product = {\n      product1: product1,\n      count: 1,\n      subPrice: 0\n    };\n    product.subPrice = CalcSubPrice(product);\n    let checkArr = cart.books.filter(item => {\n      return item.product1.id === product1.id;\n    });\n\n    if (checkArr.length === 0) {\n      cart.books.push(product);\n    } else {\n      cart.books = cart.books.filter(item => {\n        return item.product1.id !== product1.id;\n      });\n    } // cart.totalPrice = calcTotalPrice(cart);\n\n\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch({\n      type: ADD_AND_DELETE_CART,\n      payload: cart.books.length\n    });\n  };\n};\nexport const checkProductInCart = id => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      books: [],\n      totalPrice: 0\n    };\n  }\n\n  let checkArr = cart.books.filter(item => {\n    return item.product1.id === id;\n  });\n\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  return dispatch => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    dispatch({\n      type: GET_CART,\n      payload: cart\n    });\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  return dispatch => {\n    if (count < 1) {\n      return;\n    }\n\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (!cart) {\n      cart = {\n        books: [],\n        totalPrice: 0\n      };\n    }\n\n    cart.books = cart.books.map(item => {\n      if (item.product1.id === id) {\n        item.count = count;\n        item.subPrice = CalcSubPrice(item);\n      }\n\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch(getCart());\n  };\n}; // Clear count of cart\n\nexport const clearCountOfCart = () => {\n  return dispatch => {\n    dispatch({\n      type: CLEAR_COUNT_OF_CART,\n      payload: null\n    });\n  };\n};","map":{"version":3,"names":["CalcSubPrice","calcTotalPrice","ADD_AND_DELETE_CART","CLEAR_COUNT_OF_CART","GET_CART","addAndDeleteProductInCart","product1","dispatch","cart","JSON","parse","localStorage","getItem","books","totalPrice","product","count","subPrice","checkArr","filter","item","id","length","push","setItem","stringify","type","payload","checkProductInCart","getCart","changeCountProduct","map","clearCountOfCart"],"sources":["/home/bayel/Desktop/work/library-test/src/redux/cart-actions.js"],"sourcesContent":["import { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport {\n  ADD_AND_DELETE_CART,\n  CLEAR_COUNT_OF_CART,\n  GET_CART,\n} from \"./actionsType\";\n// ! cart\nexport const addAndDeleteProductInCart = (product1) => {\n  return (dispatch) => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        books: [],\n        totalPrice: 0,\n      };\n    }\n    let product = {\n      product1: product1,\n      count: 1,\n      subPrice: 0,\n    };\n    product.subPrice = CalcSubPrice(product);\n    let checkArr = cart.books.filter((item) => {\n      return item.product1.id === product1.id;\n    });\n    if (checkArr.length === 0) {\n      cart.books.push(product);\n    } else {\n      cart.books = cart.books.filter((item) => {\n        return item.product1.id !== product1.id;\n      });\n    }\n    // cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    dispatch({\n      type: ADD_AND_DELETE_CART,\n      payload: cart.books.length,\n    });\n  };\n};\nexport const checkProductInCart = (id) => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      books: [],\n      totalPrice: 0,\n    };\n  }\n  let checkArr = cart.books.filter((item) => {\n    return item.product1.id === id;\n  });\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  return (dispatch) => {\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    dispatch({\n      type: GET_CART,\n      payload: cart,\n    });\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  return (dispatch) => {\n    if (count < 1) {\n      return;\n    }\n    let cart = JSON.parse(localStorage.getItem(\"cart\"));\n    if (!cart) {\n      cart = {\n        books: [],\n        totalPrice: 0,\n      };\n    }\n    cart.books = cart.books.map((item) => {\n      if (item.product1.id === id) {\n        item.count = count;\n        item.subPrice = CalcSubPrice(item);\n      }\n      return item;\n    });\n    cart.totalPrice = calcTotalPrice(cart);\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n    dispatch(getCart());\n  };\n};\n// Clear count of cart\nexport const clearCountOfCart = () => {\n  return (dispatch) => {\n    dispatch({\n      type: CLEAR_COUNT_OF_CART,\n      payload: null,\n    });\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}