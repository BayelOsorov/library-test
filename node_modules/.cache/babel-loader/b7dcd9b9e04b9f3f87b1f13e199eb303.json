{"ast":null,"code":"import axios from \"axios\";\nimport $axios from \"../axiosConfig\";\nimport jwt_decode from \"jwt-decode\";\nimport { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport { ADD_AND_DELETE_CART, ADD_AND_DELETE_FAVORITES, CLEAR_COUNT_OF_CART, GET_CART, GET_FAVORITES, USER_GET_COUNT, USER_GET_DETAIL, USER_GET_PRODUCT } from \"./actionsType\";\nconst API = \"http://localhost:4000/user\";\nexport const getProducts = function () {\n  let page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"1\";\n  return async dispatch => {\n    try {\n      let filter = window.location.search;\n      let filter1 = window.location.search;\n      if (filter) filter += `&page=${page}`;else filter += `?page=${page}`;\n      const {\n        data\n      } = await $axios(`products/${filter}`);\n      if (filter1) filter1 += \"&limit=10000\";else filter1 += \"?limit=10000\";\n      const response = await $axios(`products/${filter1}`);\n      dispatch({\n        type: USER_GET_COUNT,\n        payload: response.data.rows.length\n      });\n      let action = {\n        type: USER_GET_PRODUCT,\n        payload: data.rows\n      };\n      dispatch(action);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const getDetail = id => {\n  return async dispatch => {\n    const {\n      data\n    } = await $axios(\"/products/\" + id);\n    dispatch({\n      type: USER_GET_DETAIL,\n      payload: data\n    });\n  };\n}; // ! cart\n\nexport const addAndDeleteProductInCart = product1 => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      products: [],\n      totalPrice: 0\n    };\n  }\n\n  let product = {\n    product1: product1,\n    count: 1,\n    subPrice: 0\n  };\n  product.subPrice = CalcSubPrice(product);\n  let checkArr = cart.products.filter(item => {\n    return item.product1.id === product1.id;\n  });\n\n  if (checkArr.length === 0) {\n    cart.products.push(product);\n  } else {\n    cart.products = cart.products.filter(item => {\n      return item.product1.id !== product1.id;\n    });\n  }\n\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  return {\n    type: ADD_AND_DELETE_CART,\n    payload: cart.products.length\n  };\n};\nexport const checkProductInCart = id => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      products: [],\n      totalPrice: 0\n    };\n  }\n\n  let checkArr = cart.products.filter(item => {\n    return item.product1.id === id;\n  });\n\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  return {\n    type: GET_CART,\n    payload: cart\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  if (count < 1) {\n    return;\n  }\n\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n  if (!cart) {\n    cart = {\n      products: [],\n      totalPrice: 0\n    };\n  }\n\n  cart.products = cart.products.map(item => {\n    if (item.product1.id === id) {\n      item.count = count;\n      item.subPrice = CalcSubPrice(item);\n    }\n\n    return item;\n  });\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  getCart();\n}; // Clear count of cart\n\nexport const clearCountOfCart = () => {\n  return {\n    type: CLEAR_COUNT_OF_CART,\n    payload: null\n  };\n};","map":{"version":3,"names":["axios","$axios","jwt_decode","CalcSubPrice","calcTotalPrice","ADD_AND_DELETE_CART","ADD_AND_DELETE_FAVORITES","CLEAR_COUNT_OF_CART","GET_CART","GET_FAVORITES","USER_GET_COUNT","USER_GET_DETAIL","USER_GET_PRODUCT","API","getProducts","page","dispatch","filter","window","location","search","filter1","data","response","type","payload","rows","length","action","e","console","log","getDetail","id","addAndDeleteProductInCart","product1","cart","JSON","parse","localStorage","getItem","products","totalPrice","product","count","subPrice","checkArr","item","push","setItem","stringify","checkProductInCart","getCart","changeCountProduct","map","clearCountOfCart"],"sources":["/home/nurlan/Desktop/crud-redux-library/src/redux/cart-actions.js"],"sourcesContent":["import axios from \"axios\";\nimport $axios from \"../axiosConfig\";\nimport jwt_decode from \"jwt-decode\";\nimport { CalcSubPrice, calcTotalPrice } from \"../utils/calcPrice\";\nimport {\n  ADD_AND_DELETE_CART,\n  ADD_AND_DELETE_FAVORITES,\n  CLEAR_COUNT_OF_CART,\n  GET_CART,\n  GET_FAVORITES,\n  USER_GET_COUNT,\n  USER_GET_DETAIL,\n  USER_GET_PRODUCT,\n} from \"./actionsType\";\nconst API = \"http://localhost:4000/user\";\n\nexport const getProducts = (page = \"1\") => {\n  return async (dispatch) => {\n    try {\n      let filter = window.location.search;\n      let filter1 = window.location.search;\n\n      if (filter) filter += `&page=${page}`;\n      else filter += `?page=${page}`;\n\n      const { data } = await $axios(`products/${filter}`);\n      if (filter1) filter1 += \"&limit=10000\";\n      else filter1 += \"?limit=10000\";\n\n      const response = await $axios(`products/${filter1}`);\n      dispatch({\n        type: USER_GET_COUNT,\n        payload: response.data.rows.length,\n      });\n      let action = {\n        type: USER_GET_PRODUCT,\n        payload: data.rows,\n      };\n      dispatch(action);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const getDetail = (id) => {\n  return async (dispatch) => {\n    const { data } = await $axios(\"/products/\" + id);\n    dispatch({\n      type: USER_GET_DETAIL,\n      payload: data,\n    });\n  };\n};\n\n// ! cart\nexport const addAndDeleteProductInCart = (product1) => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      products: [],\n      totalPrice: 0,\n    };\n  }\n  let product = {\n    product1: product1,\n    count: 1,\n    subPrice: 0,\n  };\n  product.subPrice = CalcSubPrice(product);\n  let checkArr = cart.products.filter((item) => {\n    return item.product1.id === product1.id;\n  });\n  if (checkArr.length === 0) {\n    cart.products.push(product);\n  } else {\n    cart.products = cart.products.filter((item) => {\n      return item.product1.id !== product1.id;\n    });\n  }\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  return {\n    type: ADD_AND_DELETE_CART,\n    payload: cart.products.length,\n  };\n};\nexport const checkProductInCart = (id) => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      products: [],\n      totalPrice: 0,\n    };\n  }\n  let checkArr = cart.products.filter((item) => {\n    return item.product1.id === id;\n  });\n  if (checkArr.length === 0) {\n    return false;\n  } else {\n    return true;\n  }\n};\nexport const getCart = () => {\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  return {\n    type: GET_CART,\n    payload: cart,\n  };\n};\nexport const changeCountProduct = (count, id) => {\n  if (count < 1) {\n    return;\n  }\n  let cart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!cart) {\n    cart = {\n      products: [],\n      totalPrice: 0,\n    };\n  }\n  cart.products = cart.products.map((item) => {\n    if (item.product1.id === id) {\n      item.count = count;\n      item.subPrice = CalcSubPrice(item);\n    }\n    return item;\n  });\n  cart.totalPrice = calcTotalPrice(cart);\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n\n  getCart();\n};\n// Clear count of cart\nexport const clearCountOfCart = () => {\n  return {\n    type: CLEAR_COUNT_OF_CART,\n    payload: null,\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}